# Git & プロジェクト初期化 - 設計判断記録

**作成日**: 2025年6月30日  
**Issue**: #1 開発基盤セットアップ  
**タスク**: 1. Git & プロジェクト初期化

## 主要な設計判断

### 1. ブランチ戦略の選択

**判断内容**:
Git Flow を簡略化したブランチ戦略を採用

**詳細構成**:
- **主要ブランチ**: `main` (本番) + `develop` (統合)
- **フィーチャーブランチ**: `feat/[issue-number]-[description]` 形式
- **バグ修正ブランチ**: `fix/[issue-number]-[description]` 形式
- **ホットフィックス**: `hotfix/[description]` 形式

**選択理由**:
- **シンプルさ重視**: 小規模チーム開発に適した軽量なワークフロー
- **Issue連携**: ブランチ名にIssue番号を含めることで追跡可能性を確保
- **統合管理**: develop ブランチで機能統合とテストを行い、品質確保
- **本番安定性**: main ブランチは常にデプロイ可能な状態を維持

**代替案の検討**:
- **GitHub Flow**: シンプルだが、開発統合ブランチがないため不採用
- **Git Flow**: 高機能だが、小規模プロジェクトには過度に複雑なため簡略化

**影響**:
- 開発フローの標準化
- コードレビュープロセスの明確化
- リリース管理の簡素化

### 2. コミットメッセージ規約

**判断内容**:
Conventional Commits を日本語で採用

**採用した形式**:
```
type: 日本語でのメッセージ

例:
feat: ユーザー認証機能の実装
fix: ログイン画面のバリデーションエラー修正
docs: API仕様書の更新
```

**type の定義**:
- `feat`: 新機能追加
- `fix`: バグ修正
- `docs`: ドキュメント変更
- `style`: フォーマット修正（コードの動作に影響しない）
- `refactor`: リファクタリング（機能変更なし）
- `test`: テストコードの追加・修正
- `chore`: その他の変更（ビルドツールやライブラリの更新など）
- `issue`: Issueに関連する変更

**選択理由**:
- **国際標準**: Conventional Commits の type プレフィックス採用
- **日本語対応**: メッセージ本文は日本語で可読性向上
- **自動化対応**: 将来的な changelog 生成やバージョニング自動化に対応
- **チーム開発**: 統一されたメッセージ形式でコミット履歴が読みやすい

**影響**:
- コミット履歴の可読性向上
- 自動化ツールとの連携準備
- 開発チーム内の意思疎通向上

### 3. .gitignore 設定戦略

**判断内容**:
Rails + React + Docker 環境に対応した包括的な .gitignore 設定

**主要な除外対象**:
```gitignore
# セキュリティ関連
.env*
/backend/config/master.key
/backend/config/credentials/*.key

# 開発環境
/backend/log/
/backend/tmp/
/frontend/node_modules/
/frontend/dist/

# Docker
docker-compose.override.yml

# IDE設定
.vscode/
.idea/
```

**選択理由**:
- **セキュリティ**: 機密情報の誤コミット防止
- **環境独立性**: 開発者固有の設定ファイル除外
- **ビルド成果物**: 生成されるファイルのバージョン管理除外
- **パフォーマンス**: 大容量ファイル (node_modules等) の除外

**影響**:
- セキュリティリスクの軽減
- リポジトリサイズの最適化
- 開発者間の環境差異の排除

### 4. README.md 設計方針

**判断内容**:
段階的詳細化による開発ドキュメント戦略

**構成**:
1. **プロジェクト概要**: システムの目的と主要機能
2. **技術スタック**: 確定バージョンの明記
3. **開発環境セットアップ**: Docker Compose によるワンコマンド起動
4. **Issue管理**: 6つの主要Issue一覧と進捗
5. **開発フロー**: ブランチ戦略とコミット規約への参照

**選択理由**:
- **新規参加者対応**: 迅速な環境構築ガイド
- **Issue管理**: 開発計画の可視化
- **技術仕様**: 確定事項の明文化
- **メンテナンス性**: 各段階での更新ルール明確化

**影響**:
- チーム開発の効率化
- プロジェクト理解の促進
- 技術仕様の共有

## 技術選択の妥当性検証

### ✅ 成功した選択
1. **簡略化Git Flow**: 小規模開発に適したワークフロー
2. **日本語コミット**: チーム内コミュニケーションの向上
3. **包括的.gitignore**: セキュリティと効率性の両立
4. **段階的README**: 開発計画の明確化

### ⚠️ 注意点
1. **ブランチ管理**: develop ブランチの定期的なクリーンアップ必要
2. **コミット粒度**: 適切なコミット単位の徹底
3. **ドキュメント更新**: README の継続的な更新が必要

## 次のタスクへの影響

### Docker環境構築 (タスク2)
- ブランチ戦略に基づく開発環境分離
- .gitignore での Docker 関連ファイル管理
- 環境構築手順のREADME記載

### Rails API セットアップ (タスク3)
- Git管理対象外のセキュリティファイル明確化
- 機能追加時のブランチ作成フロー確立

## 確認事項

### 完了確認
- [x] main, develop ブランチ作成
- [x] ブランチ保護設定
- [x] .gitignore 設定完了
- [x] README.md 初版作成
- [x] コミットメッセージ規約策定

### 継続管理項目
- [ ] ブランチ戦略の遵守
- [ ] README.md の定期更新
- [ ] .gitignore の必要に応じた追加
